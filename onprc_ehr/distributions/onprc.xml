<?xml version="1.0" encoding="ISO-8859-1"?>

<project default="usage">

    <target name="distribution">
        <antcall target="gather_modules" />
        <ant antfile="${basedir}/build.xml" target="package_redistributables">
            <property name="dist_sub.dir" value="onprc" />
            <property name="skip.zipDistribution" value="true" />
            <property name="extraFileIdentifier" value="-onprc" />
        </ant>
    </target>

    <target name="gather_modules">
        <ant antfile="${basedir}/distributions/legacy.xml" target="gather_modules" />
        <copy todir="${dist.modules.dir}">
            <fileset dir="${staging.modules.dir}">
                <include name="ehr.module" />
                <include name="eIACUC_ETL.module"/>
                <include name="extscheduler.module"/>
                <include name="EHR_ComplianceDB.module" />
                <include name="elispot_assay.module"/>
                <include name="flowassays.module" />
                <include name="GeneticsCore.module" />
                <include name="GenotypeAssays.module" />
                <include name="HormoneAssay.module"/>
                <include name="laboratory.module" />
                <include name="LDK.module" />
                <include name="onprc_ehr.module" />
                <include name="onprc_reports.module" />
                <include name="ogasync.module" />
                <include name="mergesync.module" />
                <include name="onprc_billing.module" />
                <include name="onprc_billingpublic.module" />
                <include name="onprc_ssu.module" />
                <include name="sla.module" />
                <include name="SequenceAnalysis.module" />
                <include name="Viral_Load_Assay.module" />
                <include name="jbrowse.module" />
                <include name="blast.module" />
                <include name="variantdb.module" />
                <include name="galaxyintegration.module" />
                <include name="omerointegration.module" />
                <include name="htcondorconnector.module" />
                <include name="treatmentETL.module" />
                <!--<include name="ONPRC_EHR_ComplianceDB.module" />-->
            </fileset>
        </copy>
    </target>

    <target name="usage">
        <echo>Not intended to be run directly</echo>
        <echo>Run `ant dist -Dname=distname` from the project root to prepare a particular distribution</echo>
    </target>

</project>
